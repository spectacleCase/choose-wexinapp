<!-- pages/index.wxml -->
<view class="container">
  <view class="header">
    <view class="location-info">
      <image class="location-icon" src="../../assets/images/地点.png"></image>
      <text class="location-name">{{locationName}}</text>
    </view>
  </view>
  <text class="main-title">你今天想吃什么?</text>
  <view class="search-section">
    <view class="search-bar">
      <view class="search-input-container">
        <icon type="search" size="14" color="#999" />
        <input class="search-input" placeholder="搜索美食..." bindinput="onSearchInput" />
      </view>
      <view class="filter-button" bindtap="showFilterOptions">
        <image style="width: 60rpx; height: 60rpx;" src="../../assets/images/更多.png" mode="aspectFill"></image>
      </view>
    </view>
  </view>
  <view class="recommend-button" bindtap="onRecommendTap">
    <text class="recommend-text">待定调整</text>
  </view>
  <view class="health-tips" bindtap="getTips">
    <text class="tips-title">健康小知识</text>
    <text class="tips-content">{{healthTip}}</text>
  </view>
  <text class="recommendation-title">推荐</text>
  <view class="recommendation-results">
    <scroll-view class="results-scroll" scroll-y="true">
      <view class="results-container">
        <view wx:for="{{recommendationResults}}" wx:key="index" class="result-item">
          <image class="result-image" src="{{item.image}}" mode="aspectFill"></image>
          <view class="result-info">
            <text class="result-tag">{{item.tag}}</text>
            <text class="result-name">{{item.name}}</text>
            <text class="result-distance">{{item.distance}}</text>
          </view>
        </view>
      </view>
    </scroll-view>
  </view>
</view>
<!-- 筛选选项弹出层 -->
<view class="popup {{showFilter ? 'show' : ''}}">
  <view class="popup-content">
    <view class="popup-header">
      <text class="popup-title">筛选</text>
      <text class="popup-reset" bindtap="resetFilter">重置</text>
    </view>
    <view class="popup-option">
      <text>推荐数量</text>
      <view class="count-buttons">
        <button wx:for="{{recommendationCounts}}" wx:key="index" class="count-button {{selectedCount === item ? 'selected' : ''}}" bindtap="onCountSelect" data-count="{{item}}">
          {{item}}
        </button>
      </view>
    </view>
    <view class="popup-option">
      <text>推荐类型</text>
      <view class="category-buttons">
        <button wx:for="{{recommendationCategories}}" wx:key="index" class="category-button {{selectedCategory === item ? 'selected' : ''}}" bindtap="onCategorySelect" data-category="{{item}}">
          {{item}}
        </button>
      </view>
    </view>
    <button class="confirm-button" bindtap="confirmFilter">确认</button>
  </view>
</view>